{% extends "password/base.html" %}
{% load crispy_forms_tags %}
{% block content %}
	<div class="conent-section">
		<form method = "POST">
			{% csrf_token %}
			<fieldset class="form-group">
				<legend class="border-bottom mb-4">New Password</legend>
				{{ form|crispy }}
			</fieldset>
			<div class="form-group">
				<button type="button" class="btn btn-outline-info" onclick="rand_password()"> Generate Random Password</button>
				<button class="btn btn-outline-info" type="submit">Save</button>
			</div>
		</form>
        <a class="nav-item nav-link" href="{% url 'password-list' %}">Back To List</a>
	</div>
<script type="text/javascript">
	function rand_password(){
		$("#id_password").val(password_generator(12));
	}
	function password_generator( len ) {
    var length = (len)?(len):(10);
    var string = "abcdefghijklmnopqrstuvwxyz"; //to upper 
    var numeric = '0123456789';
    var punctuation = '!@#$%^&*()_+~`|}{[]\:;?><,./-=';
    var password = "";
    var character = "";
    var crunch = true;
    while( password.length<length ) {
        entity1 = Math.ceil(string.length * Math.random()*Math.random());
        entity2 = Math.ceil(numeric.length * Math.random()*Math.random());
        entity3 = Math.ceil(punctuation.length * Math.random()*Math.random());
        hold = string.charAt( entity1 );
        hold = (password.length%2==0)?(hold.toUpperCase()):(hold);
        character += hold;
        character += numeric.charAt( entity2 );
        character += punctuation.charAt( entity3 );
        password = character;
    }
    password=password.split('').sort(function(){return 0.5-Math.random()}).join('');
    return password.substr(0,len);
}

</script>
{% endblock content %}